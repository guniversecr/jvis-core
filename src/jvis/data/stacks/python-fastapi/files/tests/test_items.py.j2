"""Tests for Item CRUD endpoints."""

{% if database_type in ("postgresql", "mysql") %}


def test_create_item(client):
    response = client.post("/api/items", json={"name": "Test Item", "description": "A test"})
    assert response.status_code == 201
    data = response.json()
    assert data["name"] == "Test Item"
    assert data["description"] == "A test"
    assert "id" in data


def test_list_items(client):
    client.post("/api/items", json={"name": "Item 1"})
    client.post("/api/items", json={"name": "Item 2"})
    response = client.get("/api/items")
    assert response.status_code == 200
    data = response.json()
    assert data["count"] >= 2


def test_get_item(client):
    create = client.post("/api/items", json={"name": "Fetch Me"})
    item_id = create.json()["id"]
    response = client.get(f"/api/items/{item_id}")
    assert response.status_code == 200
    assert response.json()["name"] == "Fetch Me"


def test_update_item(client):
    create = client.post("/api/items", json={"name": "Old Name"})
    item_id = create.json()["id"]
    response = client.patch(f"/api/items/{item_id}", json={"name": "New Name"})
    assert response.status_code == 200
    assert response.json()["name"] == "New Name"


def test_delete_item(client):
    create = client.post("/api/items", json={"name": "Delete Me"})
    item_id = create.json()["id"]
    response = client.delete(f"/api/items/{item_id}")
    assert response.status_code == 204


def test_get_nonexistent_item(client):
    response = client.get("/api/items/00000000-0000-0000-0000-000000000000")
    assert response.status_code == 404
{% else %}
# DynamoDB â€” add Item CRUD tests once boto3 service is implemented.


def test_placeholder():
    assert True
{% endif %}
